{% extends "base.html" %}

{% block title %}
    <title>Declaraciones de Renta</title>
{% endblock title %}

{% block content %}
<div class='list-container'>
    <h1>Declaraciones de Renta</h1>
    {% if pagos %}
        <div class="btn-side-to-side">
        <a href="{% url "export_pagos_confirmar" %}" class='list-button' title='Exportar declaraciones de renta'>
            <i class="fa fa-file-excel-o" aria-hidden="true" style="font-size:24px;"></i>
        </a>
        <a href="{% url "create_pago" %}" class='list-button' title='Añadir declaración de renta'>
            <i class="fa fa-plus" aria-hidden="true" style="font-size:24px;"></i>
        </a>
    </div>
    <table id="myTable" class="display">
        <thead>
            <tr>
                <th>Cliente</th>
                <th>Estado de deuda</th>
                <th>Monto a Pagar</th>
                <th>Fecha</th>
                <th>Ver Más</th>
            </tr>
        </thead>
        <tbody>
            {% for p in pagos %}
            <tr>
                <td>{{ p.client }}</td>
                <!-- https://docs.djangoproject.com/en/5.2/ref/templates/builtins/#stringformat:~:text=%7B%7B%20value-,%7Cfloatformat%3A%22%2D3g%22,-%7D%7D -->
                {% if p.a_pagar < 1 %}
                    <td style='color:green;'>Sin deuda</td>
                {% else %}
                    <td style='color:red;'>En deuda</td>
                {% endif %}
                <td>$ {{ p.a_pagar|floatformat:"-3g" }}</td> 
                <td>{{ p.created_at|date:"F, Y" }}</td>
                <td>
                    <a href="{% url "detail_pago" p.id %}" title='Ver detalles'>
                    <i class="fa fa-info btn-table" aria-hidden="true" style="font-size:24px;"></i>
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <h3>No hay declaraciones registradas en el sistema, ¿Desea <a class='anchor' href="{% url "create_pago" %}">añadir una</a>?</h3>
    {% endif %}
</div>

{% endblock content %}